import "std/core.sunder";
import "std/page_allocator.sunder";

func main() void {
    # Using std::page_allocator since it was the first allocator that happened
    # to be implemented in the standard library.
    var allocator: std::allocator = std::allocator::init[[std::page_allocator]](std::page_allocator::the());

    # Using std::page_allocator since it was the first allocator that happened
    # to be implemented in the standard library.
    var slice: []u16 = std::slice[[u16]]::new(allocator, 2048);
    for i in 0:countof(slice) {
        slice[i] = 0xBEEF;
    }

    slice = std::slice[[u16]]::resize(allocator, slice, 4096);
    for i in 0:countof(slice) {
        slice[i] = 0xF00D;
    }

    slice = std::slice[[u16]]::resize(allocator, slice, 1000);
    for i in 0:countof(slice) {
        slice[i] = 0xCAFE;
    }

    std::slice[[u16]]::delete(allocator, slice);
}
